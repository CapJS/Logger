{"version":3,"sources":["../src/logger.js"],"names":[],"mappings":"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","file":"logger.js","sourcesContent":["// var _ = require(\"lodash\");\nimport _ from \"lodash\";\n\n/*\n* REF: https://en.wikipedia.org/wiki/Syslog\n*/\n\nclass logger {\n\tconstructor ({\n\t\tprefix = null,\n\t\tsufix = null,\n\t\tlogger:_logger = console.log,\n\t\tpriority = process.env.DEBUG,\n\t} = {}) {\n\t\tthis.prefix = prefix;\n\t\tthis.sufix = sufix;\n\t\tthis._logger = _logger;\n\n\t\tlet _priority = priority;\n\n\t\tswitch ((typeof(_priority) == \"string\") ? _priority.toLowerCase(): _priority) {\n\t\t\tcase -2:\n\t\t\tcase \"-2\":\n\t\t\tcase \"hidden\":        this.priority = -2; break;\n\t\t\tcase -1:\n\t\t\tcase \"-1\":\n\t\t\tcase \"none\":          this.priority = -1; break;\n\t\t\tcase 0:\n\t\t\tcase \"0\":\n\t\t\tcase \"emer\":\n\t\t\tcase \"emergency\":     this.priority = 0; break;\n\t\t\tcase \"1\":\n\t\t\tcase 1:\n\t\t\tcase \"alert\":         this.priority = 1; break;\n\t\t\tcase 2:\n\t\t\tcase \"2\":\n\t\t\tcase \"crit\":\n\t\t\tcase \"critical\":      this.priority = 2; break;\n\t\t\tcase 3:\n\t\t\tcase \"3\":\n\t\t\tcase \"err\":\n\t\t\tcase \"error\":         this.priority = 3; break;\n\t\t\tcase 4:\n\t\t\tcase \"4\":\n\t\t\tcase \"warn\":\n\t\t\tcase \"warning\":       this.priority = 4; break;\n\t\t\tcase 5:\n\t\t\tcase \"5\":\n\t\t\tcase \"notice\":        this.priority = 5; break;\n\t\t\tcase 6:\n\t\t\tcase \"6\":\n\t\t\tcase \"info\":\n\t\t\tcase \"informational\": this.priority = 6; break;\n\t\t\t// debug:\n\t\t\tdefault:              this.priority = 7; break;\n\t\t}\n\t}\n\n\tgetPrefix() {\n\t\tif (this.prefix == null) {\n\t\t\tlet date = new Date();\n\t\t\treturn `[${date.getFullYear()}/${date.getMonth()+1}/${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}]`;\n\t\t} else {\n\t\t\tif (typeof(this.prefix) == \"function\") {\n\t\t\t\treturn this.prefix();\n\t\t\t} else {\n\t\t\t\treturn this.prefix;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetSufix() {\n\t\tif (this.sufix == null) {\n\t\t\treturn '';\n\t\t} else {\n\t\t\tif (typeof(this.sufix) == \"function\") {\n\t\t\t\treturn this.sufix();\n\t\t\t} else {\n\t\t\t\treturn this.sufix;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getLevelName (level) {\n\t\tlet ret = \"\";\n\t\tswitch (level) {\n\t\t\tcase 0:  ret = \"emergency\"; break;\n\t\t\tcase 1:  ret = \"alert\"; break;\n\t\t\tcase 2:  ret = \"critical\"; break;\n\t\t\tcase 3:  ret = \"error\"; break;\n\t\t\tcase 4:  ret = \"warning\"; break;\n\t\t\tcase 5:  ret = \"notice\"; break;\n\t\t\tcase 6:  ret = \"informational\"; break;\n\t\t\tdefault: ret = \"debug\"; break;\n\t\t}\n\t\treturn ret.toUpperCase();\n\t}\n\n\tlogger (level, ...args) {\n\t\tif (this.priority < level) return false;\n\t\treturn this._logger(this.getPrefix(), `${logger.getLevelName(level)}:`, ...args, this.getSufix());\n\t}\n\n\t// -1\n\tlog (...args) {\n\t\treturn this.logger(-1, ...args);\n\t}\n\t// 0\n\temergency (...args) {\n\t\treturn this.logger(0, ...args);\n\t}\n\temerg (...args) {\n\t\treturn this.emergency(...args);\n\t}\n\t// 1\n\talert (...args) {\n\t\treturn this.logger(1, ...args);\n\t}\n\t// 2\n\tcritical (...args) {\n\t\treturn this.logger(2, ...args);\n\t}\n\tcrit (...args) {\n\t\treturn this.critical(...args);\n\t}\n\t// 3\n\terror (...args) {\n\t\treturn this.logger(3, ...args);\n\t}\n\terr (...args) {\n\t\treturn this.error(...args);\n\t}\n\t// 4\n\twarning (...args) {\n\t\treturn this.logger(4, ...args);\n\t}\n\twarn (...args) {\n\t\treturn this.warning(...args);\n\t}\n\t// 5\n\tnotice (...args) {\n\t\treturn this.logger(5, ...args);\n\t}\n\t// 6\n\tinformational (...args) {\n\t\treturn this.logger(6, ...args);\n\t}\n\tinfo (...args) {\n\t\treturn this.informational(...args);\n\t}\n\t// 7\n\tdebug (...args) {\n\t\treturn this.logger(7, ...args);\n\t}\n\tdeb (...args) {\n\t\treturn this.debug(...args);\n\t}\n\n}\n\n\n// Global Logger\nlet globalLogger = new logger();\n\nfunction logGlobalLogger (...args) {\n\tif (this instanceof logGlobalLogger) {\n\t\treturn new logger(...args);\n\t}\n\treturn globalLogger.log(...args);\n};\n\nmodule.exports = logGlobalLogger;\n\nmodule.exports.log = function (...args) {return globalLogger.log(...args);};\nmodule.exports.emergency = function (...args) {return globalLogger.emergency(...args);};\nmodule.exports.emerg = function (...args) {return globalLogger.emerg(...args);};\nmodule.exports.alert = function (...args) {return globalLogger.alert(...args);};\nmodule.exports.critical = function (...args) {return globalLogger.critical(...args);};\nmodule.exports.crit = function (...args) {return globalLogger.crit(...args);};\nmodule.exports.error = function (...args) {return globalLogger.error(...args);};\nmodule.exports.err = function (...args) {return globalLogger.err(...args);};\nmodule.exports.warning = function (...args) {return globalLogger.warning(...args);};\nmodule.exports.warn = function (...args) {return globalLogger.warn(...args);};\nmodule.exports.notice = function (...args) {return globalLogger.notice(...args);};\nmodule.exports.informational = function (...args) {return globalLogger.informational(...args);};\nmodule.exports.info = function (...args) {return globalLogger.info(...args);};\nmodule.exports.debug = function (...args) {return globalLogger.debug(...args);};\nmodule.exports.deb = function (...args) {return globalLogger.deb(...args);};\n\nmodule.exports.logger = logger;\n\n"]}